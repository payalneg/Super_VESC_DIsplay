# VESC TWAI (CAN) Setup Guide

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å VESC –∫ ESP32-S3 —á–µ—Ä–µ–∑ CAN —à–∏–Ω—É –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π TWAI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

## üîß –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### ESP32-S3 Board
- –í–∞—à–∞ –ø–ª–∞—Ç–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏–∑ –ø–∞–ø–∫–∏ `Arduino-v3.1.3`
- CAN –ø–∏–Ω—ã: TX=GPIO48, RX=GPIO47

### CAN Transceiver (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
ESP32 –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CAN –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –Ω–æ **–ù–ï –∏–º–µ–µ—Ç** –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–∞. –í–∞–º –Ω—É–∂–µ–Ω –≤–Ω–µ—à–Ω–∏–π CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä:

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä—ã:**
- **TJA1050** - —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π, 3.3V/5V —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π
- **MCP2551** - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä
- **SN65HVD230** - 3.3V, –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π
- **VP230** - –¥–µ—à–µ–≤–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞

### VESC Controller
- –õ—é–±–æ–π VESC —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CAN
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å 500 –∫–±–∏—Ç/—Å
- CAN ID –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)

## üîå –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```
ESP32-S3          CAN Transceiver       VESC
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ GPIO 48 ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ CTX         ‚îÇ      ‚îÇ      ‚îÇ
‚îÇ GPIO 47 ‚îÇ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ CRX         ‚îÇ      ‚îÇ      ‚îÇ
‚îÇ   3.3V  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ VCC         ‚îÇ      ‚îÇ      ‚îÇ
‚îÇ   GND   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ GND         ‚îÇ      ‚îÇ      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ CAN_H       ‚îÇ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ CAN_H‚îÇ
                 ‚îÇ CAN_L       ‚îÇ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ CAN_L‚îÇ
                 ‚îÇ GND         ‚îÇ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ GND  ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –î–µ—Ç–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ TJA1050:

| ESP32-S3 Pin | TJA1050 Pin | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------------|-------------|----------|
| GPIO 48      | Pin 1 (TXD) | CAN TX   |
| GPIO 47      | Pin 4 (RXD) | CAN RX   |
| 3.3V         | Pin 3 (VCC) | –ü–∏—Ç–∞–Ω–∏–µ  |
| GND          | Pin 2 (GND) | –ó–µ–º–ª—è    |
| -            | Pin 6 (CANH)| –ö VESC CANH |
| -            | Pin 7 (CANL)| –ö VESC CANL |

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VESC

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VESC Tool
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ VESC –∫ –∫–æ–º–ø—å—é—Ç–µ—Ä—É —á–µ—Ä–µ–∑ USB
2. –û—Ç–∫—Ä–æ–π—Ç–µ VESC Tool
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VESC

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CAN
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **App Settings ‚Üí CAN**
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
   - **CAN ID**: 0 (–∏–ª–∏ –¥—Ä—É–≥–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID)
   - **CAN Baud Rate**: 500k
   - **Send Status**: Rate 1 (–∏–ª–∏ –≤—ã—à–µ –¥–ª—è —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)
   - **CAN Status Rate 1**: 50 Hz (–∏–ª–∏ –ø–æ –∂–µ–ª–∞–Ω–∏—é)
   - **CAN Status Rate 2**: 10 Hz
   - **CAN Status Rate 3**: 10 Hz
   - **CAN Status Rate 4**: 10 Hz
   - **CAN Status Rate 5**: 10 Hz

### 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
1. –ù–∞–∂–º–∏—Ç–µ **Write Configuration**
2. –û—Ç–∫–ª—é—á–∏—Ç–µ USB –∫–∞–±–µ–ª—å
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ CAN —à–∏–Ω—É

## üíª –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –í–∫–ª—é—á–µ–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç
–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `main.cpp`:

```cpp
#include "VESC_TWAI_Driver.h"

void setup() {
    Serial.begin(115200);
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è VESC TWAI
    if (VESC_TWAI_Init(0)) {  // VESC ID = 0
        Serial.println("VESC TWAI initialized!");
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ VESC
        VESC_TWAI_SetConfig(
            0.107f,  // –î–∏–∞–º–µ—Ç—Ä –∫–æ–ª–µ—Å–∞ –≤ –º–µ—Ç—Ä–∞—Ö
            14,      // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—é—Å–æ–≤ –º–æ—Ç–æ—Ä–∞
            1.0f,    // –ü–µ—Ä–µ–¥–∞—Ç–æ—á–Ω–æ–µ —á–∏—Å–ª–æ
            10,      // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —è—á–µ–µ–∫ –±–∞—Ç–∞—Ä–µ–∏
            5.0f     // –ï–º–∫–æ—Å—Ç—å –±–∞—Ç–∞—Ä–µ–∏ –≤ Ah
        );
    }
}

void loop() {
    VESC_TWAI_Loop();  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–∏ —Å VESC
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    if (VESC_TWAI_IsConnected()) {
        vesc_twai_values_t values = VESC_TWAI_GetValues();
        Serial.printf("Speed: %.2f km/h\n", values.speed_kmh);
        Serial.printf("Battery: %.1f V\n", values.v_in);
    }
    
    delay(100);
}
```

### 2. –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```cpp
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
bool VESC_TWAI_Init(uint8_t vesc_id = 0);

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–≤—ã–∑—ã–≤–∞—Ç—å –≤ loop)
void VESC_TWAI_Loop();

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
bool VESC_TWAI_IsConnected();

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
vesc_twai_values_t VESC_TWAI_GetValues();

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–æ–º
void VESC_TWAI_SetDuty(float duty_cycle);     // -1.0 –¥–æ 1.0
void VESC_TWAI_SetCurrent(float current);     // –≤ –∞–º–ø–µ—Ä–∞—Ö
void VESC_TWAI_SetRPM(float rpm);             // –æ–±–æ—Ä–æ—Ç—ã –≤ –º–∏–Ω—É—Ç—É
void VESC_TWAI_SetBrakeCurrent(float current); // —Ç–æ–∫ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏—è

// –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
void VESC_TWAI_Ping();
void VESC_TWAI_PrintDebug();
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞
–ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–∏–º–µ—Ä `examples/VESC_TWAI_Test.ino` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
1. –û—Ç–∫—Ä–æ–π—Ç–µ Serial Monitor (115200 baud)
2. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:
   ```
   VESC TWAI driver installed successfully
   VESC TWAI driver started successfully
   VESC TWAI alerts configured successfully
   ```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏ —Å VESC
–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ VESC:
```
VESC Connected
Speed: 0.00 km/h
RPM: 0
Battery: 42.0 V (85.5%)
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "Failed to install VESC TWAI driver"
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∏–Ω—ã –∏–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å –¥—Ä—É–≥–∏–º–∏ –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–∏–Ω—ã GPIO 48/47 –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### –ü—Ä–æ–±–ª–µ–º–∞: "VESC Not Connected"
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ VESC
- **–†–µ—à–µ–Ω–∏–µ**: 
  1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–∞
  2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ VESC –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ CAN ID 0 –∏ —Å–∫–æ—Ä–æ—Å—Ç—å 500k
  3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ VESC –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "Bus error occurred"
- **–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–æ–±–ª–µ–º—ã —Å CAN —à–∏–Ω–æ–π
- **–†–µ—à–µ–Ω–∏–µ**:
  1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã (120 –û–º –Ω–∞ –∫–æ–Ω—Ü–∞—Ö —à–∏–Ω—ã)
  2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π CAN_H –∏ CAN_L
  3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–ª–∏–Ω–∞ –ø—Ä–æ–≤–æ–¥–æ–≤ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—É—é

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ, –Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `VESC_TWAI_SetConfig()`:
  - –î–∏–∞–º–µ—Ç—Ä –∫–æ–ª–µ—Å–∞
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—é—Å–æ–≤ –º–æ—Ç–æ—Ä–∞
  - –ü–µ—Ä–µ–¥–∞—Ç–æ—á–Ω–æ–µ —á–∏—Å–ª–æ
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–∞—Ç–∞—Ä–µ–∏

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ `vesc_twai_values_t` —Å–æ–¥–µ—Ä–∂–∏—Ç:

```cpp
typedef struct {
    // –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    bool connected;
    unsigned long last_update;
    
    // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    float rpm;              // –û–±–æ—Ä–æ—Ç—ã –º–æ—Ç–æ—Ä–∞
    float current;          // –¢–æ–∫ –º–æ—Ç–æ—Ä–∞ (A)
    float duty_cycle;       // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
    float speed_kmh;        // –°–∫–æ—Ä–æ—Å—Ç—å (–∫–º/—á)
    
    // –≠–Ω–µ—Ä–≥–∏—è
    float v_in;             // –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏ (V)
    float current_in;       // –í—Ö–æ–¥–Ω–æ–π —Ç–æ–∫ (A)
    float power_watts;      // –ú–æ—â–Ω–æ—Å—Ç—å (W)
    float battery_percentage; // –ó–∞—Ä—è–¥ –±–∞—Ç–∞—Ä–µ–∏ (%)
    
    // –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
    float temp_fet;         // –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ FET (¬∞C)
    float temp_motor;       // –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –º–æ—Ç–æ—Ä–∞ (¬∞C)
    
    // –°—á–µ—Ç—á–∏–∫–∏
    float amp_hours;        // –ü–æ—Ç—Ä–∞—á–µ–Ω–æ Ah
    float amp_hours_charged; // –ó–∞—Ä—è–∂–µ–Ω–æ Ah
    float watt_hours;       // –ü–æ—Ç—Ä–∞—á–µ–Ω–æ Wh
    float watt_hours_charged; // –ó–∞—Ä—è–∂–µ–Ω–æ Wh
    float distance_km;      // –ü—Ä–æ–π–¥–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–∫–º)
    int32_t tacho_value;    // –ó–Ω–∞—á–µ–Ω–∏–µ —Ç–∞—Ö–æ–º–µ—Ç—Ä–∞
} vesc_twai_values_t;
```

## üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç

–ù–æ–≤—ã–π TWAI –¥—Ä–∞–π–≤–µ—Ä —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –≤–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç. –î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ VESC —á–µ—Ä–µ–∑ VESC Tool
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Serial Monitor –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–î—Ä–∞–π–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 100–º—Å
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ping –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å, –º–æ—â–Ω–æ—Å—Ç—å –∏ –∑–∞—Ä—è–¥ –±–∞—Ç–∞—Ä–µ–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∏ —Ç–∞–π–º–∞—É—Ç—ã

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ë—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ—Ç–æ—Ä–æ–º
2. **–¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã**: CAN —à–∏–Ω–∞ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã 120 –û–º –Ω–∞ –∫–æ–Ω—Ü–∞—Ö
3. **–ü–∏—Ç–∞–Ω–∏–µ**: CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø–∏—Ç–∞–Ω –æ—Ç 3.3V –∏–ª–∏ 5V
4. **–ó–∞–∑–µ–º–ª–µ–Ω–∏–µ**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –æ–±—â—É—é –∑–µ–º–ª—é –º–µ–∂–¥—É ESP32, —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–æ–º –∏ VESC
5. **–î–ª–∏–Ω–∞ –ø—Ä–æ–≤–æ–¥–æ–≤**: –î–ª—è 500 –∫–±–∏—Ç/—Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —à–∏–Ω—ã ~100 –º–µ—Ç—Ä–æ–≤

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ —Å—Ö–µ–º–µ
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `VESC_TWAI_PrintDebug()` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ VESC –≤ VESC Tool
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
